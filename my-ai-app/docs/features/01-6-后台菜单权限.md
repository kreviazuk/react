# 01-6 后台菜单权限

> **难度**: ⭐⭐ | **预计时间**: 1 小时

## 📋 任务目标

Admin 后台根据用户角色显示不同菜单，普通用户看不到"借阅审核"。

---

## ✅ 实现步骤

### 步骤 1: 确认 store 包含 role

**文件**: `admin/lib/store.ts`

```typescript
interface User {
  id: number;
  name: string;
  email: string;
  role: "USER" | "ADMIN"; // 确保有这个字段
}
```

- [ ] 完成

---

### 步骤 2: 修改 layout 菜单

**文件**: `admin/app/(dashboard)/layout.tsx`

关键修改：

```typescript
import { ClipboardCheck } from "lucide-react";

// 菜单配置（带角色权限）
const navItems = [
  {
    name: "Dashboard",
    href: "/",
    icon: LayoutDashboard,
    roles: ["USER", "ADMIN"],
  },
  { name: "Books", href: "/books", icon: Book, roles: ["USER", "ADMIN"] },
  {
    name: "借阅审核",
    href: "/loans/review",
    icon: ClipboardCheck,
    roles: ["ADMIN"],
  },
];

// 根据用户角色过滤菜单
const visibleNavItems = navItems.filter((item) =>
  item.roles.includes(user?.role || ""),
);

// 渲染 visibleNavItems
```

- [ ] 完成

---

## ✅ 完成标志

- [ ] 管理员能看到"借阅审核"菜单
- [ ] 普通用户看不到"借阅审核"菜单
