# 01-7 审核页面

> **难度**: ⭐⭐ | **预计时间**: 3 小时

## 📋 任务目标

创建 Admin 端的借阅审核页面。

---

## ✅ 实现步骤

### 步骤 1: 创建 API 封装

**文件**: `admin/lib/api/loans.ts`

```typescript
import axios from "@/lib/axios";

export const loansApi = {
  getPending: () => axios.get("/api/loans/pending"),
  getAll: (params?: { status?: string; page?: number }) =>
    axios.get("/api/loans", { params }),
  approve: (id: number, borrowDays?: number) =>
    axios.put(`/api/loans/${id}/approve`, { borrowDays }),
  reject: (id: number, reason: string) =>
    axios.put(`/api/loans/${id}/reject`, { reason }),
  return: (id: number) => axios.put(`/api/loans/${id}/return`),
};
```

- [ ] 完成

---

### 步骤 2: 创建审核页面

**文件**: `admin/app/(dashboard)/loans/review/page.tsx`

页面功能：

- 待审核列表（表格）
- 批准/拒绝按钮
- 拒绝时弹窗输入理由
- 操作后刷新列表

- [ ] 完成

---

### 步骤 3: 添加权限保护

```typescript
useEffect(() => {
  if (user?.role !== "ADMIN") {
    router.push("/");
  }
}, [user, router]);
```

- [ ] 完成

---

## 🎨 UI 参考

```
+----------------------------------------------------------+
| 借阅审核                                    [刷新]        |
+----------------------------------------------------------+
| 申请人     | 书名           | 申请时间      | 操作       |
+----------------------------------------------------------+
| 张三       | JavaScript入门 | 2024-01-20    | [批准] [拒绝] |
| 李四       | React实战      | 2024-01-19    | [批准] [拒绝] |
+----------------------------------------------------------+
| 暂无待审核的借阅申请                                      |
+----------------------------------------------------------+
```

---

## ✅ 完成标志

- [ ] 页面正确显示待审核列表
- [ ] 可以批准借阅
- [ ] 可以拒绝借阅（需填理由）
- [ ] 非管理员无法访问
